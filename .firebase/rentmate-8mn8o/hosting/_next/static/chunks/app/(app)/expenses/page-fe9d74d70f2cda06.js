(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{56:(e,s,i)=>{Promise.resolve().then(i.bind(i,9143))},3005:(e,s,i)=>{"use strict";i.d(s,{A:()=>t});let t=(0,i(157).A)("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]])},9143:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>A});var t=i(5155),a=i(2115),n=i(285),l=i(6695),r=i(7262),d=i(2523),c=i(5057),o=i(9409),p=i(5127),x=i(7313),h=i(2369),m=i(3013),u=i(3343),j=i(4301),v=i(3638),g=i(4601),f=i(3005),y=i(5222),N=i(7223),b=i(7481);function A(){let[e,s]=(0,a.useState)([]),[i,A]=(0,a.useState)([]),[S,F]=(0,a.useState)(null),{toast:I}=(0,b.dj)(),[E,w]=(0,a.useState)(""),[P,D]=(0,a.useState)(""),[C,M]=(0,a.useState)((0,m.GP)(new Date,"yyyy-MM-dd")),[k,$]=(0,a.useState)(""),[J,z]=(0,a.useState)([]),[q,O]=(0,a.useState)(!0),[B,H]=(0,a.useState)({}),[V,Z]=(0,a.useState)(null),[T,G]=(0,a.useState)(null),[R,W]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s(h.di),A(h.Nf);let e=(0,h.HW)();F(e),$(e.id),z(h.Nf.map(e=>e.id))},[]),(0,a.useEffect)(()=>{if(q&&J.length>0&&"number"==typeof P){let e=parseFloat((P/J.length).toFixed(2)),s={};J.forEach(i=>{s[i]=e}),H(s)}},[q,J,P]);let X=e=>{z(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},_=(e,s)=>{H(i=>({...i,[e]:""===s?NaN:parseFloat(s)}))},L=async e=>{var s;e.preventDefault();let t=new FormData(e.currentTarget),a=parseFloat(t.get("aiAmount")),n=t.get("aiDescription"),l={amount:a,description:n,payerName:(null===(s=i.find(e=>e.id===t.get("aiPayerId")))||void 0===s?void 0:s.name)||"Unknown Payer",participants:t.getAll("aiParticipants").map(e=>{var s;return(null===(s=i.find(s=>s.id===e))||void 0===s?void 0:s.name)||"Unknown"})};Z(l),W(!0),G(null);try{await new Promise(e=>setTimeout(e,1500));let e=l.participants.reduce((e,s)=>(e[s]=parseFloat((l.amount/l.participants.length).toFixed(2)),e),{});G(e),I({title:"AI Split Optimized",description:"Fair expense split has been calculated."})}catch(e){console.error("AI Split Error:",e),I({title:"AI Split Failed",description:"Could not optimize the expense split.",variant:"destructive"})}finally{W(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Expense Management"}),(0,t.jsxs)(x.tU,{defaultValue:"log",children:[(0,t.jsxs)(x.j7,{className:"grid w-full grid-cols-2 md:grid-cols-4 mb-6",children:[(0,t.jsxs)(x.Xi,{value:"log",className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{}),"Log Expense"]}),(0,t.jsxs)(x.Xi,{value:"history",className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{}),"Expense History"]}),(0,t.jsxs)(x.Xi,{value:"ai-optimizer",className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{}),"AI Split Optimizer"]}),(0,t.jsxs)(x.Xi,{value:"export",className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{}),"Export Data"]})]}),(0,t.jsx)(x.av,{value:"log",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Log New Expense"}),(0,t.jsx)(l.BT,{children:"Record a shared expense for the household."})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),"number"!=typeof P||P<=0){I({title:"Invalid Amount",description:"Please enter a valid positive amount.",variant:"destructive"});return}if(0===J.length){I({title:"No Participants",description:"Please select at least one participant.",variant:"destructive"});return}let t=[];if(q){let e=parseFloat((Number(P)/J.length).toFixed(2));t=J.map(s=>({memberId:s,share:e}))}else{let e=Object.values(B).reduce((e,s)=>e+("number"==typeof s?s:0),0);if(Math.abs(e-P)>.01*J.length){I({title:"Split Mismatch",description:"Custom splits ($".concat(e.toFixed(2),") do not add up to the total amount ($").concat(P.toFixed(2),")."),variant:"destructive"});return}t=Object.entries(B).filter(e=>{let[s]=e;return J.includes(s)&&"number"==typeof B[s]&&B[s]>0}).map(e=>{let[s,i]=e;return{memberId:s,share:i}})}if(0===t.length){I({title:"Invalid Split",description:"No valid shares defined for participants.",variant:"destructive"});return}let a={id:"expense-".concat(Date.now()),description:E,amount:P,date:(0,u.H)(C),payerId:k,participants:t,isEqualSplit:q,createdAt:new Date,householdId:"household1"};s(e=>[a,...e]),I({title:"Expense Logged",description:"".concat(E," for $").concat(P.toFixed(2)," has been logged.")}),w(""),D(""),M((0,m.GP)(new Date,"yyyy-MM-dd")),$((null==S?void 0:S.id)||""),z(i.map(e=>e.id)),O(!0),H({})},className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"description",children:"Description"}),(0,t.jsx)(d.p,{id:"description",value:E,onChange:e=>w(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"amount",children:"Amount ($)"}),(0,t.jsx)(d.p,{id:"amount",type:"number",value:P,onChange:e=>D(""===e.target.value?"":parseFloat(e.target.value)),placeholder:"0.00",step:"0.01",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"date",children:"Date"}),(0,t.jsx)(d.p,{id:"date",type:"date",value:C,onChange:e=>M(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"payerId",children:"Payer"}),(0,t.jsxs)(o.l6,{value:k,onValueChange:$,name:"payerId",children:[(0,t.jsx)(o.bq,{id:"payerId",children:(0,t.jsx)(o.yv,{placeholder:"Select payer"})}),(0,t.jsx)(o.gC,{children:i.map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{children:"Participants"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-1 p-2 border rounded-md",children:i.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.S,{id:"participant-".concat(e.id),checked:J.includes(e.id),onCheckedChange:()=>X(e.id)}),(0,t.jsx)(c.J,{htmlFor:"participant-".concat(e.id),children:e.name})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.S,{id:"isEqualSplit",checked:q,onCheckedChange:e=>O(!!e)}),(0,t.jsx)(c.J,{htmlFor:"isEqualSplit",children:"Split equally among selected participants"})]}),!q&&J.length>0&&(0,t.jsxs)("div",{className:"space-y-2 p-4 border rounded-md bg-muted/30",children:[(0,t.jsx)(c.J,{className:"font-semibold",children:"Custom Split (Ensure total matches amount)"}),J.map(e=>{var s;let a=i.find(s=>s.id===e);return a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.J,{htmlFor:"custom-split-".concat(e),className:"w-1/3",children:[a.name,":"]}),(0,t.jsx)(d.p,{id:"custom-split-".concat(e),type:"number",placeholder:"0.00",step:"0.01",value:null!==(s=B[e])&&void 0!==s?s:"",onChange:s=>_(e,""===s.target.value?"":parseFloat(s.target.value).toString()),className:"flex-1"})]},e):null}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total custom split: $",Object.values(B).reduce((e,s)=>e+("string"==typeof s&&""!==s?parseFloat(s):"number"==typeof s?s:0),0).toFixed(2)]})]}),(0,t.jsxs)(n.$,{type:"submit",className:"w-full md:w-auto",children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"})," Log Expense"]})]})})]})}),(0,t.jsx)(x.av,{value:"history",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Expense History"}),(0,t.jsx)(l.BT,{children:"Chronological log of all recorded expenses."})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)(p.XI,{children:[(0,t.jsx)(p.A0,{children:(0,t.jsxs)(p.Hj,{children:[(0,t.jsx)(p.nd,{children:"Description"}),(0,t.jsx)(p.nd,{className:"text-right",children:"Amount"}),(0,t.jsx)(p.nd,{children:"Date"}),(0,t.jsx)(p.nd,{children:"Payer"}),(0,t.jsx)(p.nd,{children:"Actions"})]})}),(0,t.jsxs)(p.BF,{children:[0===e.length&&(0,t.jsx)(p.Hj,{children:(0,t.jsx)(p.nA,{colSpan:5,className:"text-center text-muted-foreground",children:"No expenses logged yet."})}),e.map(e=>{var s;return(0,t.jsxs)(p.Hj,{children:[(0,t.jsx)(p.nA,{className:"font-medium",children:e.description}),(0,t.jsxs)(p.nA,{className:"text-right",children:["$",e.amount.toFixed(2)]}),(0,t.jsx)(p.nA,{children:(0,m.GP)(e.date,"MMM dd, yyyy")}),(0,t.jsx)(p.nA,{children:(null===(s=i.find(s=>s.id===e.payerId))||void 0===s?void 0:s.name)||"Unknown"}),(0,t.jsxs)(p.nA,{className:"flex gap-1",children:[(0,t.jsx)(n.$,{variant:"outline",size:"icon",disabled:!0,children:(0,t.jsx)(y.A,{className:"h-4 w-4"})}),(0,t.jsx)(n.$,{variant:"outline",size:"icon",disabled:!0,children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]})]},e.id)})]})]})})]})}),(0,t.jsx)(x.av,{value:"ai-optimizer",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"AI Expense Split Optimizer"}),(0,t.jsx)(l.BT,{children:"Get AI suggestions for fair expense splits based on various factors."})]}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Provide expense details for AI optimization. You can add usage patterns or individual circumstances in a full version."}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"aiDescription",children:"Expense Description"}),(0,t.jsx)(d.p,{id:"aiDescription",name:"aiDescription",defaultValue:"Team Dinner",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"aiAmount",children:"Amount ($)"}),(0,t.jsx)(d.p,{id:"aiAmount",name:"aiAmount",type:"number",placeholder:"0.00",step:"0.01",defaultValue:"100",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"aiPayerId",children:"Payer"}),(0,t.jsxs)(o.l6,{name:"aiPayerId",defaultValue:null==S?void 0:S.id,children:[(0,t.jsx)(o.bq,{id:"aiPayerId",children:(0,t.jsx)(o.yv,{placeholder:"Select payer"})}),(0,t.jsx)(o.gC,{children:i.map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{children:"Participants for AI Split"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mt-1 p-2 border rounded-md",children:i.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.S,{id:"ai-participant-".concat(e.id),name:"aiParticipants",value:e.id,defaultChecked:!0}),(0,t.jsx)(c.J,{htmlFor:"ai-participant-".concat(e.id),children:e.name})]},"ai-".concat(e.id)))})]}),(0,t.jsxs)(n.$,{type:"submit",disabled:R,children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"})," ",R?"Optimizing...":"Optimize Split with AI"]})]}),T&&(0,t.jsxs)(l.Zp,{className:"mt-6 bg-muted/50",children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"AI Optimized Split Suggestion"})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("p",{className:"mb-2 text-sm",children:["For expense: ",(0,t.jsx)("span",{className:"font-semibold",children:null==V?void 0:V.description})," amounting to ",(0,t.jsxs)("span",{className:"font-semibold",children:["$",null==V?void 0:V.amount.toFixed(2)]})," paid by ",(0,t.jsx)("span",{className:"font-semibold",children:null==V?void 0:V.payerName}),"."]}),(0,t.jsxs)(p.XI,{children:[(0,t.jsx)(p.A0,{children:(0,t.jsxs)(p.Hj,{children:[(0,t.jsx)(p.nd,{children:"Participant"}),(0,t.jsx)(p.nd,{className:"text-right",children:"Suggested Share"})]})})," ",(0,t.jsx)(p.BF,{children:Object.entries(T).map(e=>{let[s,i]=e;return(0,t.jsxs)(p.Hj,{children:[(0,t.jsx)(p.nA,{children:s}),(0,t.jsxs)(p.nA,{className:"text-right",children:["$",i.toFixed(2)]})]},s)})})]})]})]})]})]})}),(0,t.jsx)(x.av,{value:"export",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Export Expense Data"}),(0,t.jsx)(l.BT,{children:"Download your expense history as a CSV file."})]}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)(n.$,{onClick:()=>{console.log("CSV Export:\n","ID,Description,Amount,Date,Payer,Participants,IsEqualSplit,CreatedAt\n"+e.map(e=>{var s;return[e.id,'"'.concat(e.description.replace(/"/g,'""'),'"'),e.amount,(0,m.GP)(e.date,"yyyy-MM-dd"),(null===(s=i.find(s=>s.id===e.payerId))||void 0===s?void 0:s.name)||e.payerId,'"'.concat(e.participants.map(e=>{var s;return"".concat((null===(s=i.find(s=>s.id===e.memberId))||void 0===s?void 0:s.name)||e.memberId,": $").concat(e.share.toFixed(2))}).join(", "),'"'),e.isEqualSplit,(0,m.GP)(e.createdAt,"yyyy-MM-dd HH:mm:ss")].join(",")}).join("\n")),I({title:"Export Started (Demo)",description:"Expense data (logged to console for demo)."})},children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Export All Expenses to CSV (Demo)"]}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"In a real application, this would download a CSV file. For this demo, data is logged to the console."})]})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[848,115,371,13,933,32,441,684,358],()=>s(56)),_N_E=e.O()}]);